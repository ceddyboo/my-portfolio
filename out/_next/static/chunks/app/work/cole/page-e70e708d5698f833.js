(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{3265:function(e,t,i){Promise.resolve().then(i.bind(i,7233))},7233:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var a=i(7437),r=i(2265),s=i(1817),l=i(3276),o=i(3145),n=i(4368),d=i(8819),c=i(2157);let u=e=>new Promise(t=>{let i=new window.Image;i.onload=()=>t(!0),i.onerror=()=>t(!1),i.src=e}),m=r.memo(e=>{let{video:t}=e,[i,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[x,f]=(0,r.useState)(null),{ref:g,inView:v}=(0,d.YD)({triggerOnce:!0,threshold:.1,rootMargin:"50px"});return((0,r.useEffect)(()=>{var e,i,a,r;if(!t)return;let s=!0;f("https://placehold.co/480x360/1f2937/ffffff.png?text=Video+Thumbnail");let l=(null===(i=t.thumbnails)||void 0===i?void 0:null===(e=i.maxres)||void 0===e?void 0:e.url)||(null===(r=t.thumbnails)||void 0===r?void 0:null===(a=r.high)||void 0===a?void 0:a.url);return l&&u(l).then(e=>{s&&e&&f(l)}),()=>{s=!1}},[t]),t)?(0,a.jsxs)(n.E.div,{ref:g,initial:{opacity:0,y:30},animate:v?{opacity:1,y:0}:{},transition:{duration:.6,ease:"easeOut"},className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-center text-white",children:"Latest Video"}),(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsxs)("div",{className:"relative group cursor-pointer rounded-2xl overflow-hidden shadow-2xl bg-black/20 border border-white/10 transition-transform duration-300 hover:scale-[1.02]",onClick:()=>{m(!i)},children:[i?(0,a.jsx)("div",{className:"aspect-video w-full",children:(0,a.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(t.id,"?autoplay=1&rel=0&modestbranding=1"),title:t.title,className:"w-full h-full rounded-2xl",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})}):(0,a.jsxs)("div",{className:"relative aspect-video w-full",children:[!h&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-800 rounded-2xl flex items-center justify-center",children:(0,a.jsx)(s.Z,{className:"w-8 h-8 animate-spin text-white"})}),x&&(0,a.jsx)(o.default,{src:x,alt:t.title,fill:!0,unoptimized:!0,className:"object-cover rounded-2xl transition-opacity duration-500 ".concat(h?"opacity-100":"opacity-0"),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",priority:!0,onLoad:()=>{console.log("Featured video thumbnail loaded successfully:",x),p(!0)},onError:()=>{console.error("Featured video thumbnail failed to load:",x),p(!0),f("https://placehold.co/480x360/1f2937/ffffff.png?text=Video+Thumbnail")}}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/30 rounded-2xl"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-4 group-hover:bg-white/30 transition-all duration-300",children:(0,a.jsx)(l.Z,{className:"w-8 h-8 text-white ml-1"})})})]}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 rounded-b-2xl",children:[(0,a.jsx)("h3",{className:"text-white font-semibold text-lg mb-2 line-clamp-2",children:t.title}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-300",children:[(0,a.jsx)("span",{children:(0,c.p6)(t.publishedAt)}),t.viewCount&&(0,a.jsxs)("span",{children:[(0,c.YO)(t.viewCount)," views"]})]})]})]})})]}):null}),h=r.memo(e=>{let{videos:t,hasMore:i,onLoadMore:l,isLoading:o,excludeVideoId:d,playingVideos:c,setPlayingVideos:u,loadedImages:m,setLoadedImages:h}=e,x=(0,r.useMemo)(()=>t.filter(e=>e.id!==d),[t,d]);return(console.log("VideoGrid received videos:",t.length),console.log("Filtered videos:",x.length),console.log("Video IDs:",x.map(e=>e.id)),0!==x.length||o)?(0,a.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"mb-12",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mb-8",children:x.map((e,t)=>(0,a.jsx)(p,{video:e,index:t,playingVideos:c,setPlayingVideos:u,loadedImages:m,setLoadedImages:h},"".concat(e.id,"-").concat(t)))}),i&&(0,a.jsx)("div",{className:"flex justify-center items-center w-full",children:(0,a.jsx)("button",{onClick:l,disabled:o,className:"px-6 py-3 rounded-lg bg-white/5 backdrop-blur-sm border border-white/10 text-white font-medium text-sm tracking-wide transition-all duration-200 ease-out hover:bg-white/10 hover:border-white/20 active:scale-95 disabled:opacity-40 disabled:cursor-not-allowed",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):"Load More Videos"})})]})}):null}),p=r.memo(e=>{let{video:t,index:i,playingVideos:m,setPlayingVideos:h,loadedImages:p,setLoadedImages:x}=e,[f,g]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),{ref:w,inView:y}=(0,d.YD)({triggerOnce:!0,threshold:.1,rootMargin:"50px"});return(0,r.useEffect)(()=>{var e,i,a,r;if(!y)return;let s=!0;b("https://placehold.co/480x360/1f2937/ffffff.png?text=Video+Thumbnail");let l=(null===(i=t.thumbnails)||void 0===i?void 0:null===(e=i.maxres)||void 0===e?void 0:e.url)||(null===(r=t.thumbnails)||void 0===r?void 0:null===(a=r.high)||void 0===a?void 0:a.url);return l&&u(l).then(e=>{s&&e&&b(l)}),()=>{s=!1}},[y,t.thumbnails]),(0,a.jsx)(n.E.div,{ref:w,initial:{opacity:0,y:20},animate:y?{opacity:1,y:0}:{},transition:{duration:.5,delay:.1*i,ease:"easeOut"},className:"group cursor-pointer",children:(0,a.jsxs)("div",{className:"relative aspect-video w-full rounded-xl overflow-hidden shadow-lg bg-black/20 border border-white/10 transition-transform duration-300 hover:scale-[1.02]",onClick:()=>{h(e=>{let i=new Set(e);return i.has(t.id)?i.delete(t.id):i.add(t.id),i})},children:[m.has(t.id)?(0,a.jsx)("div",{className:"aspect-video w-full",children:(0,a.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(t.id,"?autoplay=1&rel=0&modestbranding=1"),title:t.title,className:"w-full h-full rounded-xl",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})}):(0,a.jsxs)("div",{className:"relative aspect-video w-full",children:[!f&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-800 rounded-xl flex items-center justify-center",children:(0,a.jsx)(s.Z,{className:"w-6 h-6 animate-spin text-white"})}),v&&(0,a.jsx)(o.default,{src:v,alt:t.title,fill:!0,unoptimized:!0,className:"object-cover rounded-xl transition-opacity duration-500 ".concat(f?"opacity-100":"opacity-0"),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",onLoad:()=>{g(!0),x(e=>new Set([...e,t.id]))},onError:()=>{g(!0),b("https://placehold.co/480x360/1f2937/ffffff.png?text=Video+Thumbnail")}}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/30 rounded-xl"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,a.jsx)("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-3",children:(0,a.jsx)(l.Z,{className:"w-6 h-6 text-white ml-0.5"})})})]}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3 rounded-b-xl",children:[(0,a.jsx)("h3",{className:"text-white font-semibold text-sm mb-1 line-clamp-2",children:t.title}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-300",children:[(0,a.jsx)("span",{children:(0,c.p6)(t.publishedAt)}),t.viewCount&&(0,a.jsxs)("span",{children:[(0,c.YO)(t.viewCount)," views"]})]})]})]})})}),x=r.memo(e=>{let{clientData:t}=e,{ref:i,inView:r}=(0,d.YD)({triggerOnce:!0,threshold:.1,rootMargin:"50px"});return(0,a.jsxs)(n.E.div,{ref:i,initial:{opacity:0,y:30},animate:r?{opacity:1,y:0}:{},transition:{duration:.6,ease:"easeOut"},className:"text-center mb-12",children:[(0,a.jsxs)(n.E.div,{initial:{opacity:0,scale:.9},animate:r?{opacity:1,scale:1}:{},transition:{duration:.5,delay:.2,ease:"easeOut"},className:"inline-flex items-center bg-gradient-to-r from-purple-600/30 via-purple-700/25 to-purple-800/30 border border-purple-400/40 rounded-full px-8 py-4 mb-8 backdrop-blur-xl shadow-2xl shadow-purple-500/20",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/10 to-purple-800/10 rounded-full"}),(0,a.jsx)("span",{className:"relative text-purple-100 text-sm font-bold tracking-wide",children:t.category})]}),(0,a.jsx)(n.E.h1,{initial:{opacity:0,y:20},animate:r?{opacity:1,y:0}:{},transition:{duration:.6,delay:.3,ease:"easeOut"},className:"text-3xl md:text-4xl lg:text-6xl font-bold text-white mb-4",children:t.name}),(0,a.jsx)(n.E.p,{initial:{opacity:0,y:20},animate:r?{opacity:1,y:0}:{},transition:{duration:.6,delay:.4,ease:"easeOut"},className:"text-lg md:text-xl text-gray-300 max-w-3xl mx-auto px-4",children:t.description})]})});function f(){let[e,t]=(0,r.useState)([]),[i,l]=(0,r.useState)(null),[o,n]=(0,r.useState)(!0),[d,c]=(0,r.useState)(!1),[u,p]=(0,r.useState)(1),[f,g]=(0,r.useState)(new Set),[v,b]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{(async()=>{n(!0);try{let[e,i]=await Promise.all([fetch("/api/youtube?pageToken=&maxResults=1"),fetch("/api/youtube?pageToken=&maxResults=9")]);if(e.ok){let t=await e.json();console.log("Featured data:",t),t.videos&&t.videos.length>0&&l(t.videos[0])}if(i.ok){let e=await i.json(),a=e.videos||[];console.log("Grid data received:",e),console.log("Videos to set:",a.length),console.log("Video IDs from API:",a.map(e=>e.id)),t(a),c(e.hasMore||!1)}else console.error("Grid response not ok:",i.status,i.statusText)}catch(e){console.error("Error loading initial data:",e)}finally{n(!1)}})()},[]);let w=(0,r.useCallback)(async()=>{if(!o&&d){n(!0);try{let e=u+1,i=await fetch("/api/youtube?pageToken=page_".concat(e,"&maxResults=9"));if(i.ok){let a=await i.json(),r=a.videos||[];setTimeout(()=>{t(e=>[...e,...r]),c(a.hasMore||!1),p(e),n(!1)},100)}else n(!1)}catch(e){console.error("Error loading more videos:",e),n(!1)}}},[o,d,u]);return(0,a.jsx)("div",{className:"min-h-screen bg-black",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 pt-28 pb-16 md:pt-40 md:pb-20",children:[(0,a.jsx)(x,{clientData:{name:"Cole the Cornstar",subscribers:"1.8M",backgroundImage:"/images/default-background.jpg",videos:[],thumbnails:[],category:"Farming/Construction",description:"Revolutionary farming and construction content that has captured millions of viewers worldwide."}}),i&&(0,a.jsx)(m,{video:i}),e.length>0&&(0,a.jsx)(h,{videos:e,hasMore:d,onLoadMore:w,isLoading:o,excludeVideoId:null==i?void 0:i.id,playingVideos:f,setPlayingVideos:g,loadedImages:v,setLoadedImages:b}),o&&0===e.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(s.Z,{className:"w-8 h-8 animate-spin text-white mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-white",children:"Loading videos..."})]}),!o&&0===e.length&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-white",children:"No videos found. Please try again later."})})]})})}},9205:function(e,t,i){"use strict";i.d(t,{Z:function(){return u}});var a=i(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),l=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((e,t,i)=>!!e&&""!==e.trim()&&i.indexOf(e)===t).join(" ").trim()},n=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)((e,t)=>{let{color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:m,...h}=e;return(0,a.createElement)("svg",{ref:t,...d,width:r,height:r,stroke:i,strokeWidth:l?24*Number(s)/Number(r):s,className:o("lucide",c),...!u&&!n(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,i]=e;return(0,a.createElement)(t,i)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let i=(0,a.forwardRef)((i,s)=>{let{className:n,...d}=i;return(0,a.createElement)(c,{ref:s,iconNode:t,className:o("lucide-".concat(r(l(e))),"lucide-".concat(e),n),...d})});return i.displayName=l(e),i}},1817:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3276:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});let a=(0,i(9205).Z)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},8819:function(e,t,i){"use strict";i.d(t,{YD:function(){return d}});var a=i(2265),r=Object.defineProperty,s=new Map,l=new WeakMap,o=0,n=void 0;function d(){var e;let{threshold:t,delay:i,trackVisibility:r,rootMargin:d,root:c,triggerOnce:u,skip:m,initialInView:h,fallbackInView:p,onChange:x}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[f,g]=a.useState(null),v=a.useRef(x),[b,w]=a.useState({inView:!!h,entry:void 0});v.current=x,a.useEffect(()=>{let e;if(!m&&f)return e=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(void 0===window.IntersectionObserver&&void 0!==a){let r=e.getBoundingClientRect();return t(a,{isIntersecting:a,target:e,intersectionRatio:"number"==typeof i.threshold?i.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}let{id:r,observer:d,elements:c}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var i;return"".concat(t,"_").concat("root"===t?(i=e.root)?(l.has(i)||(o+=1,l.set(i,o.toString())),l.get(i)):"0":e[t])}).toString(),i=s.get(t);if(!i){let a;let r=new Map,l=new IntersectionObserver(t=>{t.forEach(t=>{var i;let s=t.isIntersecting&&a.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=s),null==(i=r.get(t.target))||i.forEach(e=>{e(s,t)})})},e);a=l.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:t,observer:l,elements:r},s.set(t,i)}return i}(i),u=c.get(e)||[];return c.has(e)||c.set(e,u),u.push(t),d.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(c.delete(e),d.unobserve(e)),0===c.size&&(d.disconnect(),s.delete(r))}}(f,(t,i)=>{w({inView:t,entry:i}),v.current&&v.current(t,i),i.isIntersecting&&u&&e&&(e(),e=void 0)},{root:c,rootMargin:d,threshold:t,trackVisibility:r,delay:i},p),()=>{e&&e()}},[Array.isArray(t)?t.toString():t,f,c,d,u,m,r,p,i]);let y=null==(e=b.entry)?void 0:e.target,j=a.useRef(void 0);f||!y||u||m||j.current===y||(j.current=y,w({inView:!!h,entry:void 0}));let N=[g,b.inView,b.entry];return N.ref=N[0],N.inView=N[1],N.entry=N[2],N}a.Component}},function(e){e.O(0,[145,368,157,971,117,744],function(){return e(e.s=3265)}),_N_E=e.O()}]);